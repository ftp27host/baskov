function object2vrSkin(t,i){var r=this,s=new Array,o=new Array;this.player=t,this.player.skinObj=this,this.divSkin=t.divSkin;var n="";if("?"==i)for(var a=document.getElementsByTagName("script"),g=0;g<a.length;g++){var l=a[g].src;if(l.indexOf("skin.js")>=0){var _=l.lastIndexOf("/");_>=0&&(n=l.substr(0,_+1))}}else i&&(n=i);this.elementMouseDown=new Array,this.elementMouseOver=new Array;var g,d="",f="transition",p="transform",u="Webkit,Moz,O,ms,Ms".split(",");for(g=0;g<u.length;g++)"undefined"!=typeof document.body.style[u[g]+"Transform"]&&(d="-"+u[g].toLowerCase()+"-",f=u[g]+"Transition",p=u[g]+"Transform");this.player.setMargins(0,0,0,0),this.updateSize=function(t){var i=new Array;for(i.push(t);i.length>0;)if(e=i.pop(),e.ggUpdatePosition&&e.ggUpdatePosition(),e.hasChildNodes())for(g=0;g<e.childNodes.length;g++)i.push(e.childNodes[g])},parameterToTransform=function(t){return"translate("+t.rx+"px,"+t.ry+"px) rotate("+t.a+"deg) scale("+t.sx+","+t.sy+")"},this.findElements=function(t,i){var s=new Array,o=new Array,n=new RegExp(t,"");for(o.push(r.divSkin);o.length>0;)if(e=o.pop(),i?n.test(e.ggId)&&s.push(e):e.ggId==t&&s.push(e),e.hasChildNodes())for(g=0;g<e.childNodes.length;g++)o.push(e.childNodes[g]);return s},this.addSkin=function(){this._arrow_right=document.createElement("div"),this._arrow_right.ggId="arrow_right",this._arrow_right.ggParameter={rx:0,ry:0,a:0,sx:-1,sy:1},this._arrow_right.ggVisible=!0,this._arrow_right.ggUpdatePosition=function(){this.style[f]="none",this.parentNode&&(w=this.parentNode.offsetWidth,this.style.left=-64+w+"px",h=this.parentNode.offsetHeight,this.style.top=-44+h/2+"px")},hs="position:absolute;",hs+="left: -64px;",hs+="top:  -44px;",hs+="width: 43px;",hs+="height: 43px;",hs+=d+"transform-origin: 50% 50%;",hs+=d+"transform: "+parameterToTransform(this._arrow_right.ggParameter)+";",hs+="visibility: inherit;",this._arrow_right.setAttribute("style",hs),this._arrow_right__img=document.createElement("img"),this._arrow_right__img.setAttribute("src",n+"img/pano/arrow_right.png"),this._arrow_right__img.setAttribute("style","position: absolute;top: 0px;left: 0px;"),r.player.checkLoaded.push(this._arrow_right__img),this._arrow_right.appendChild(this._arrow_right__img),this._arrow_right.onmouseover=function(){r.elementMouseOver.arrow_right=!0},this._arrow_right.onmouseout=function(){r.elementMouseOver.arrow_right=!1},this._arrow_right.ontouchend=function(){r.elementMouseOver.arrow_right=!1},this.divSkin.appendChild(this._arrow_right),this._arrow_left=document.createElement("div"),this._arrow_left.ggId="arrow_left",this._arrow_left.ggParameter={rx:0,ry:0,a:0,sx:1,sy:1},this._arrow_left.ggVisible=!0,this._arrow_left.ggUpdatePosition=function(){this.style[f]="none",this.parentNode&&(h=this.parentNode.offsetHeight,this.style.top=-44+h/2+"px")},hs="position:absolute;",hs+="left: 20px;",hs+="top:  -44px;",hs+="width: 43px;",hs+="height: 43px;",hs+=d+"transform-origin: 50% 50%;",hs+="visibility: inherit;",this._arrow_left.setAttribute("style",hs),this._arrow_left__img=document.createElement("img"),this._arrow_left__img.setAttribute("src",n+"img/pano/arrow_left.png"),this._arrow_left__img.setAttribute("style","position: absolute;top: 0px;left: 0px;"),r.player.checkLoaded.push(this._arrow_left__img),this._arrow_left.appendChild(this._arrow_left__img),this._arrow_left.onmouseover=function(){r.elementMouseOver.arrow_left=!0},this._arrow_left.onmouseout=function(){r.elementMouseOver.arrow_left=!1},this._arrow_left.ontouchend=function(){r.elementMouseOver.arrow_left=!1},this.divSkin.appendChild(this._arrow_left),this.divSkin.ggUpdateSize=function(t,e){r.updateSize(r.divSkin)},this.divSkin.ggViewerInit=function(){},this.divSkin.ggLoaded=function(){},this.divSkin.ggReLoaded=function(){},this.divSkin.ggEnterFullscreen=function(){},this.divSkin.ggExitFullscreen=function(){},this.skinTimerEvent()},this.hotspotProxyClick=function(t){},this.hotspotProxyOver=function(t){},this.hotspotProxyOut=function(t){},this.changeActiveNode=function(t){var e,i,n=new Array,h=r.player.userdata.tags;for(e=0;e<s.length;e++){var a=!1;for(s[e].ggMarkerNodeId==t&&(a=!0),i=0;i<h.length;i++)s[e].ggMarkerNodeId==h[i]&&(a=!0);a&&n.push(s[e])}for(e=0;e<o.length;e++)n.indexOf(o[e])<0&&(o[e].ggMarkerNormal&&(o[e].ggMarkerNormal.style.visibility="inherit"),o[e].ggMarkerActive&&(o[e].ggMarkerActive.style.visibility="hidden"),o[e].ggDeactivate&&o[e].ggDeactivate());for(e=0;e<n.length;e++)o.indexOf(n[e])<0&&(n[e].ggMarkerNormal&&(n[e].ggMarkerNormal.style.visibility="hidden"),n[e].ggMarkerActive&&(n[e].ggMarkerActive.style.visibility="inherit"),n[e].ggActivate&&n[e].ggActivate());o=n},this.skinTimerEvent=function(){setTimeout(function(){r.skinTimerEvent()},10),r.elementMouseOver.arrow_right&&r.player.changePan(-.25,!0),r.elementMouseOver.arrow_left&&r.player.changePan(.25,!0)},this.addSkin()}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9za2luLmpzIl0sIm5hbWVzIjpbIm9iamVjdDJ2clNraW4iLCJwbGF5ZXIiLCJiYXNlIiwibWUiLCJ0aGlzIiwibm9kZU1hcmtlciIsIkFycmF5IiwiYWN0aXZlTm9kZU1hcmtlciIsInNraW5PYmoiLCJkaXZTa2luIiwiYmFzZVBhdGgiLCJzY3JpcHRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImkiLCJsZW5ndGgiLCJzcmMiLCJpbmRleE9mIiwicCIsImxhc3RJbmRleE9mIiwic3Vic3RyIiwiZWxlbWVudE1vdXNlRG93biIsImVsZW1lbnRNb3VzZU92ZXIiLCJjc3NQcmVmaXgiLCJkb21UcmFuc2l0aW9uIiwiZG9tVHJhbnNmb3JtIiwicHJlZml4ZXMiLCJzcGxpdCIsImJvZHkiLCJzdHlsZSIsInRvTG93ZXJDYXNlIiwic2V0TWFyZ2lucyIsInVwZGF0ZVNpemUiLCJzdGFydEVsZW1lbnQiLCJzdGFjayIsInB1c2giLCJlIiwicG9wIiwiZ2dVcGRhdGVQb3NpdGlvbiIsImhhc0NoaWxkTm9kZXMiLCJjaGlsZE5vZGVzIiwicGFyYW1ldGVyVG9UcmFuc2Zvcm0iLCJyeCIsInJ5IiwiYSIsInN4Iiwic3kiLCJmaW5kRWxlbWVudHMiLCJpZCIsInJlZ2V4IiwiciIsInBhdCIsIlJlZ0V4cCIsInRlc3QiLCJnZ0lkIiwiYWRkU2tpbiIsIl9hcnJvd19yaWdodCIsImNyZWF0ZUVsZW1lbnQiLCJnZ1BhcmFtZXRlciIsImdnVmlzaWJsZSIsInBhcmVudE5vZGUiLCJ3Iiwib2Zmc2V0V2lkdGgiLCJsZWZ0IiwiaCIsIm9mZnNldEhlaWdodCIsInRvcCIsImhzIiwic2V0QXR0cmlidXRlIiwiX2Fycm93X3JpZ2h0X19pbWciLCJjaGVja0xvYWRlZCIsImFwcGVuZENoaWxkIiwib25tb3VzZW92ZXIiLCJvbm1vdXNlb3V0Iiwib250b3VjaGVuZCIsIl9hcnJvd19sZWZ0IiwiX2Fycm93X2xlZnRfX2ltZyIsImdnVXBkYXRlU2l6ZSIsImdnVmlld2VySW5pdCIsImdnTG9hZGVkIiwiZ2dSZUxvYWRlZCIsImdnRW50ZXJGdWxsc2NyZWVuIiwiZ2dFeGl0RnVsbHNjcmVlbiIsInNraW5UaW1lckV2ZW50IiwiaG90c3BvdFByb3h5Q2xpY2siLCJob3RzcG90UHJveHlPdmVyIiwiaG90c3BvdFByb3h5T3V0IiwiY2hhbmdlQWN0aXZlTm9kZSIsImoiLCJuZXdNYXJrZXIiLCJ0YWdzIiwidXNlcmRhdGEiLCJtYXRjaCIsImdnTWFya2VyTm9kZUlkIiwiZ2dNYXJrZXJOb3JtYWwiLCJ2aXNpYmlsaXR5IiwiZ2dNYXJrZXJBY3RpdmUiLCJnZ0RlYWN0aXZhdGUiLCJnZ0FjdGl2YXRlIiwic2V0VGltZW91dCIsImNoYW5nZVBhbiJdLCJtYXBwaW5ncyI6IkFBS0EsUUFBU0EsZUFBY0MsRUFBT0MsR0FDN0IsR0FBSUMsR0FBR0MsS0FFSEMsRUFBVyxHQUFJQyxPQUNmQyxFQUFpQixHQUFJRCxNQUN6QkYsTUFBS0gsT0FBT0EsRUFDWkcsS0FBS0gsT0FBT08sUUFBUUosS0FDcEJBLEtBQUtLLFFBQVFSLEVBQU9RLE9BQ3BCLElBQUlDLEdBQVMsRUFFYixJQUFVLEtBQU5SLEVBRUgsSUFBSSxHQURBUyxHQUFVQyxTQUFTQyxxQkFBcUIsVUFDcENDLEVBQUUsRUFBRUEsRUFBRUgsRUFBUUksT0FBT0QsSUFBSyxDQUNqQyxHQUFJRSxHQUFJTCxFQUFRRyxHQUFHRSxHQUNuQixJQUFJQSxFQUFJQyxRQUFRLFlBQVksRUFBRyxDQUM5QixHQUFJQyxHQUFFRixFQUFJRyxZQUFZLElBQ2xCRCxJQUFHLElBQ05SLEVBQVNNLEVBQUlJLE9BQU8sRUFBRUYsRUFBRSxTQUt4QmhCLEtBQ0hRLEVBQVNSLEVBRVZFLE1BQUtpQixpQkFBaUIsR0FBSWYsT0FDMUJGLEtBQUtrQixpQkFBaUIsR0FBSWhCLE1BQzFCLElBSUlRLEdBSkFTLEVBQVUsR0FDVkMsRUFBYyxhQUNkQyxFQUFhLFlBQ2JDLEVBQVMscUJBQXFCQyxNQUFNLElBRXhDLEtBQUliLEVBQUUsRUFBRUEs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LE9BQU9ELElBQ3RCUCxFQUFpQlUsUUFBUXdFLEVBQVUzRSxJQUFJLElBQ3RDMkUsRUFBVTNFLEdBQUdnRixpQkFDaEJMLEVBQVUzRSxHQUFHZ0YsZUFBZWpFLE1BQU1rRSxXQUFXLFVBRTFDTixFQUFVM0UsR0FBR2tGLGlCQUNoQlAsRUFBVTNFLEdBQUdrRixlQUFlbkUsTUFBTWtFLFdBQVcsV0FFMUNOLEVBQVUzRSxHQUFHb0YsWUFDaEJULEVBQVUzRSxHQUFHb0YsYUFJaEIzRixHQUFpQmtGLEdBRWxCckYsS0FBSytFLGVBQWUsV0FDbkJnQixXQUFXLFdBQWFoRyxFQUFHZ0Ysa0JBQXFCLElBQzVDaEYsRUFBR21CLGlCQUE4QixhQUNwQ25CLEVBQUdGLE9BQU9tRyxXQUFXLEtBQUssR0FFdkJqRyxFQUFHbUIsaUJBQTZCLFlBQ25DbkIsRUFBR0YsT0FBT21HLFVBQVUsS0FBSyxJQUczQmhHLEtBQUttRCIsImZpbGUiOiJsaWIvc2tpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdhcmRlbiBHbm9tZSBTb2Z0d2FyZSAtIFNraW5cbi8vIE9iamVjdDJWUiAyLjAuMi8yNDA3XG4vLyBGaWxlbmFtZTogYmFza292XzM2MC5nZ3NrXG4vLyBHZW5lcmF0ZWQg0JLRgiA1LiDQvNCw0LkgMTg6MjE6NDUgMjAxNVxuXG5mdW5jdGlvbiBvYmplY3QydnJTa2luKHBsYXllcixiYXNlKSB7XG5cdHZhciBtZT10aGlzO1xuXHR2YXIgZmxhZz1mYWxzZTtcblx0dmFyIG5vZGVNYXJrZXI9bmV3IEFycmF5KCk7XG5cdHZhciBhY3RpdmVOb2RlTWFya2VyPW5ldyBBcnJheSgpO1xuXHR0aGlzLnBsYXllcj1wbGF5ZXI7XG5cdHRoaXMucGxheWVyLnNraW5PYmo9dGhpcztcblx0dGhpcy5kaXZTa2luPXBsYXllci5kaXZTa2luO1xuXHR2YXIgYmFzZVBhdGg9XCJcIjtcblx0Ly8gYXV0byBkZXRlY3QgYmFzZSBwYXRoXG5cdGlmIChiYXNlPT0nPycpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcblx0XHRmb3IodmFyIGk9MDtpPHNjcmlwdHMubGVuZ3RoO2krKykge1xuXHRcdFx0dmFyIHNyYz1zY3JpcHRzW2ldLnNyYztcblx0XHRcdGlmIChzcmMuaW5kZXhPZignc2tpbi5qcycpPj0wKSB7XG5cdFx0XHRcdHZhciBwPXNyYy5sYXN0SW5kZXhPZignLycpO1xuXHRcdFx0XHRpZiAocD49MCkge1xuXHRcdFx0XHRcdGJhc2VQYXRoPXNyYy5zdWJzdHIoMCxwKzEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2Vcblx0aWYgKGJhc2UpIHtcblx0XHRiYXNlUGF0aD1iYXNlO1xuXHR9XG5cdHRoaXMuZWxlbWVudE1vdXNlRG93bj1uZXcgQXJyYXkoKTtcblx0dGhpcy5lbGVtZW50TW91c2VPdmVyPW5ldyBBcnJheSgpO1xuXHR2YXIgY3NzUHJlZml4PScnO1xuXHR2YXIgZG9tVHJhbnNpdGlvbj0ndHJhbnNpdGlvbic7XG5cdHZhciBkb21UcmFuc2Zvcm09J3RyYW5zZm9ybSc7XG5cdHZhciBwcmVmaXhlcz0nV2Via2l0LE1veixPLG1zLE1zJy5zcGxpdCgnLCcpO1xuXHR2YXIgaTtcblx0Zm9yKGk9MDtpPHByZWZpeGVzLmxlbmd0aDtpKyspIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGVbcHJlZml4ZXNbaV0gKyAnVHJhbnNmb3JtJ10gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRjc3NQcmVmaXg9Jy0nICsgcHJlZml4ZXNbaV0udG9Mb3dlckNhc2UoKSArICctJztcblx0XHRcdGRvbVRyYW5zaXRpb249cHJlZml4ZXNbaV0gKyAnVHJhbnNpdGlvbic7XG5cdFx0XHRkb21UcmFuc2Zvcm09cHJlZml4ZXNbaV0gKyAnVHJhbnNmb3JtJztcblx0XHR9XG5cdH1cblx0XG5cdHRoaXMucGxheWVyLnNldE1hcmdpbnMoMCwwLDAsMCk7XG5cdFxuXHR0aGlzLnVwZGF0ZVNpemU9ZnVuY3Rpb24oc3RhcnRFbGVtZW50KSB7XG5cdFx0dmFyIHN0YWNrPW5ldyBBcnJheSgpO1xuXHRcdHN0YWNrLnB1c2goc3RhcnRFbGVtZW50KTtcblx0XHR3aGlsZShzdGFjay5sZW5ndGg+MCkge1xuXHRcdFx0ZT1zdGFjay5wb3AoKTtcblx0XHRcdGlmIChlLmdnVXBkYXRlUG9zaXRpb24pIHtcblx0XHRcdFx0ZS5nZ1VwZGF0ZVBvc2l0aW9uKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZS5oYXNDaGlsZE5vZGVzKCkpIHtcblx0XHRcdFx0Zm9yKGk9MDtpPGUuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdFx0c3RhY2sucHVzaChlLmNoaWxkTm9kZXNbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRwYXJhbWV0ZXJUb1RyYW5zZm9ybT1mdW5jdGlvbihwKSB7XG5cdFx0cmV0dXJuICd0cmFuc2xhdGUoJyArIHAucnggKyAncHgsJyArIHAucnkgKyAncHgpIHJvdGF0ZSgnICsgcC5hICsgJ2RlZykgc2NhbGUoJyArIHAuc3ggKyAnLCcgKyBwLnN5ICsgJyknO1xuXHR9XG5cdFxuXHR0aGlzLmZpbmRFbGVtZW50cz1mdW5jdGlvbihpZCxyZWdleCkge1xuXHRcdHZhciByPW5ldyBBcnJheSgpO1xuXHRcdHZhciBzdGFjaz1uZXcgQXJyYXkoKTtcblx0XHR2YXIgcGF0PW5ldyBSZWdFeHAoaWQsJycpO1xuXHRcdHN0YWNrLnB1c2gobWUuZGl2U2tpbik7XG5cdFx0d2hpbGUoc3RhY2subGVuZ3RoPjApIHtcblx0XHRcdGU9c3RhY2sucG9wKCk7XG5cdFx0XHRpZiAocmVnZXgpIHtcblx0XHRcdFx0aWYgKHBhdC50ZXN0KGUuZ2dJZCkpIHIucHVzaChlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChlLmdnSWQ9PWlkKSByLnB1c2goZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZS5oYXNDaGlsZE5vZGVzKCkpIHtcblx0XHRcdFx0Zm9yKGk9MDtpPGUuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdFx0c3RhY2sucHVzaChlLmNoaWxkTm9kZXNbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByO1xuXHR9XG5cdFxuXHR0aGlzLmFkZFNraW49ZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5fYXJyb3dfcmlnaHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy5fYXJyb3dfcmlnaHQuZ2dJZD0nYXJyb3dfcmlnaHQnXG5cdFx0dGhpcy5fYXJyb3dfcmlnaHQuZ2dQYXJhbWV0ZXI9eyByeDowLHJ5OjAsYTowLHN4Oi0xLHN5OjEgfTtcblx0XHR0aGlzLl9hcnJvd19yaWdodC5nZ1Zpc2libGU9dHJ1ZTtcblx0XHR0aGlzLl9hcnJvd19yaWdodC5nZ1VwZGF0ZVBvc2l0aW9uPWZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5zdHlsZVtkb21UcmFuc2l0aW9uXT0nbm9uZSc7XG5cdFx0XHRpZiAodGhpcy5wYXJlbnROb2RlKSB7XG5cdFx0XHRcdHc9dGhpcy5wYXJlbnROb2RlLm9mZnNldFdpZHRoO1xuXHRcdFx0XHR0aGlzLnN0eWxlLmxlZnQ9KC02NCArIHcpICsgJ3B4Jztcblx0XHRcdFx0aD10aGlzLnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XHR0aGlzLnN0eWxlLnRvcD0oLTQ0ICsgaC8yKSArICdweCc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGhzID0ncG9zaXRpb246YWJzb2x1dGU7Jztcblx0XHRocys9J2xlZnQ6IC02NHB4Oyc7XG5cdFx0aHMrPSd0b3A6ICAtNDRweDsnO1xuXHRcdGhzKz0nd2lkdGg6IDQzcHg7Jztcblx0XHRocys9J2hlaWdodDogNDNweDsnO1xuXHRcdGhzKz1jc3NQcmVmaXggKyAndHJhbnNmb3JtLW9yaWdpbjogNTAlIDUwJTsnO1xuXHRcdGhzKz1jc3NQcmVmaXggKyAndHJhbnNmb3JtOiAnICsgcGFyYW1ldGVyVG9UcmFuc2Zvcm0odGhpcy5fYXJyb3dfcmlnaHQuZ2dQYXJhbWV0ZXIpICsgJzsnO1xuXHRcdGhzKz0ndmlzaWJpbGl0eTogaW5oZXJpdDsnO1xuXHRcdHRoaXMuX2Fycm93X3JpZ2h0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLGhzKTtcblx0XHR0aGlzLl9hcnJvd19yaWdodF9faW1nPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdHRoaXMuX2Fycm93X3JpZ2h0X19pbWcuc2V0QXR0cmlidXRlKCdzcmMnLGJhc2VQYXRoICsgJ2ltZy9wYW5vL2Fycm93X3JpZ2h0LnBuZycpO1xuXHRcdHRoaXMuX2Fycm93X3JpZ2h0X19pbWcuc2V0QXR0cmlidXRlKCdzdHlsZScsJ3Bvc2l0aW9uOiBhYnNvbHV0ZTt0b3A6IDBweDtsZWZ0OiAwcHg7Jyk7XG5cdFx0bWUucGxheWVyLmNoZWNrTG9hZGVkLnB1c2godGhpcy5fYXJyb3dfcmlnaHRfX2ltZyk7XG5cdFx0dGhpcy5fYXJyb3dfcmlnaHQuYXBwZW5kQ2hpbGQodGhpcy5fYXJyb3dfcmlnaHRfX2ltZyk7XG5cdFx0dGhpcy5fYXJyb3dfcmlnaHQub25tb3VzZW92ZXI9ZnVuY3Rpb24gKCkge1xuXHRcdFx0bWUuZWxlbWVudE1vdXNlT3ZlclsnYXJyb3dfcmlnaHQnXT10cnVlO1xuXHRcdH1cblx0XHR0aGlzLl9hcnJvd19yaWdodC5vbm1vdXNlb3V0PWZ1bmN0aW9uICgpIHtcblx0XHRcdG1lLmVsZW1lbnRNb3VzZU92ZXJbJ2Fycm93X3JpZ2h0J109ZmFsc2U7XG5cdFx0fVxuXHRcdHRoaXMuX2Fycm93X3JpZ2h0Lm9udG91Y2hlbmQ9ZnVuY3Rpb24gKCkge1xuXHRcdFx0bWUuZWxlbWVudE1vdXNlT3ZlclsnYXJyb3dfcmlnaHQnXT1mYWxzZTtcblx0XHR9XG5cdFx0dGhpcy5kaXZTa2luLmFwcGVuZENoaWxkKHRoaXMuX2Fycm93X3JpZ2h0KTtcblx0XHR0aGlzLl9hcnJvd19sZWZ0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHRoaXMuX2Fycm93X2xlZnQuZ2dJZD0nYXJyb3dfbGVmdCdcblx0XHR0aGlzLl9hcnJvd19sZWZ0LmdnUGFyYW1ldGVyPXsgcng6MCxyeTowLGE6MCxzeDoxLHN5OjEgfTtcblx0XHR0aGlzLl9hcnJvd19sZWZ0LmdnVmlzaWJsZT10cnVlO1xuXHRcdHRoaXMuX2Fycm93X2xlZnQuZ2dVcGRhdGVQb3NpdGlvbj1mdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc3R5bGVbZG9tVHJhbnNpdGlvbl09J25vbmUnO1xuXHRcdFx0aWYgKHRoaXMucGFyZW50Tm9kZSkge1xuXHRcdFx0XHRoPXRoaXMucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQ7XG5cdFx0XHRcdHRoaXMuc3R5bGUudG9wPSgtNDQgKyBoLzIpICsgJ3B4Jztcblx0XHRcdH1cblx0XHR9XG5cdFx0aHMgPSdwb3NpdGlvbjphYnNvbHV0ZTsnO1xuXHRcdGhzKz0nbGVmdDogMjBweDsnO1xuXHRcdGhzKz0ndG9wOiAgLTQ0cHg7Jztcblx0XHRocys9J3dpZHRoOiA0M3B4Oyc7XG5cdFx0aHMrPSdoZWlnaHQ6IDQzcHg7Jztcblx0XHRocys9Y3NzUHJlZml4ICsgJ3RyYW5zZm9ybS1vcmlnaW46IDUwJSA1MCU7Jztcblx0XHRocys9J3Zpc2liaWxpdHk6IGluaGVyaXQ7Jztcblx0XHR0aGlzLl9hcnJvd19sZWZ0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLGhzKTtcblx0XHR0aGlzLl9hcnJvd19sZWZ0X19pbWc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdFx0dGhpcy5fYXJyb3dfbGVmdF9faW1nLnNldEF0dHJpYnV0ZSgnc3JjJyxiYXNlUGF0aCArICdpbWcvcGFuby9hcnJvd19sZWZ0LnBuZycpO1xuXHRcdHRoaXMuX2Fycm93X2xlZnRfX2ltZy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywncG9zaXRpb246IGFic29sdXRlO3RvcDogMHB4O2xlZnQ6IDBweDsnKTtcblx0XHRtZS5wbGF5ZXIuY2hlY2tMb2FkZWQucHVzaCh0aGlzLl9hcnJvd19sZWZ0X19pbWcpO1xuXHRcdHRoaXMuX2Fycm93X2xlZnQuYXBwZW5kQ2hpbGQodGhpcy5fYXJyb3dfbGVmdF9faW1nKTtcblx0XHR0aGlzLl9hcnJvd19sZWZ0Lm9ubW91c2VvdmVyPWZ1bmN0aW9uICgpIHtcblx0XHRcdG1lLmVsZW1lbnRNb3VzZU92ZXJbJ2Fycm93X2xlZnQnXT10cnVlO1xuXHRcdH1cblx0XHR0aGlzLl9hcnJvd19sZWZ0Lm9ubW91c2VvdXQ9ZnVuY3Rpb24gKCkge1xuXHRcdFx0bWUuZWxlbWVudE1vdXNlT3ZlclsnYXJyb3dfbGVmdCddPWZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLl9hcnJvd19sZWZ0Lm9udG91Y2hlbmQ9ZnVuY3Rpb24gKCkge1xuXHRcdFx0bWUuZWxlbWVudE1vdXNlT3ZlclsnYXJyb3dfbGVmdCddPWZhbHNlO1xuXHRcdH1cblx0XHR0aGlzLmRpdlNraW4uYXBwZW5kQ2hpbGQodGhpcy5fYXJyb3dfbGVmdCk7XG5cdFx0dGhpcy5kaXZTa2luLmdnVXBkYXRlU2l6ZT1mdW5jdGlvbih3LGgpIHtcblx0XHRcdG1lLnVwZGF0ZVNpemUobWUuZGl2U2tpbik7XG5cdFx0fVxuXHRcdHRoaXMuZGl2U2tpbi5nZ1ZpZXdlckluaXQ9ZnVuY3Rpb24oKSB7XG5cdFx0fVxuXHRcdHRoaXMuZGl2U2tpbi5nZ0xvYWRlZD1mdW5jdGlvbigpIHtcblx0XHR9XG5cdFx0dGhpcy5kaXZTa2luLmdnUmVMb2FkZWQ9ZnVuY3Rpb24oKSB7XG5cdFx0fVxuXHRcdHRoaXMuZGl2U2tpbi5nZ0VudGVyRnVsbHNjcmVlbj1mdW5jdGlvbigpIHtcblx0XHR9XG5cdFx0dGhpcy5kaXZTa2luLmdnRXhpdEZ1bGxzY3JlZW49ZnVuY3Rpb24oKSB7XG5cdFx0fVxuXHRcdHRoaXMuc2tpblRpbWVyRXZlbnQoKTtcblx0fTtcblx0dGhpcy5ob3RzcG90UHJveHlDbGljaz1mdW5jdGlvbihpZCkge1xuXHR9XG5cdHRoaXMuaG90c3BvdFByb3h5T3Zlcj1mdW5jdGlvbihpZCkge1xuXHR9XG5cdHRoaXMuaG90c3BvdFByb3h5T3V0PWZ1bmN0aW9uKGlkKSB7XG5cdH1cblx0dGhpcy5jaGFuZ2VBY3RpdmVOb2RlPWZ1bmN0aW9uKGlkKSB7XG5cdFx0dmFyIG5ld01hcmtlcj1uZXcgQXJyYXkoKTtcblx0XHR2YXIgaSxqO1xuXHRcdHZhciB0YWdzPW1lLnBsYXllci51c2VyZGF0YS50YWdzO1xuXHRcdGZvciAoaT0wO2k8bm9kZU1hcmtlci5sZW5ndGg7aSsrKSB7XG5cdFx0dmFyIG1hdGNoPWZhbHNlO1xuXHRcdFx0aWYgKG5vZGVNYXJrZXJbaV0uZ2dNYXJrZXJOb2RlSWQ9PWlkKSBtYXRjaD10cnVlO1xuXHRcdFx0Zm9yKGo9MDtqPHRhZ3MubGVuZ3RoO2orKykge1xuXHRcdFx0XHRpZiAobm9kZU1hcmtlcltpXS5nZ01hcmtlck5vZGVJZD09dGFnc1tqXSkgbWF0Y2g9dHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRuZXdNYXJrZXIucHVzaChub2RlTWFya2VyW2ldKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Zm9yKGk9MDtpPGFjdGl2ZU5vZGVNYXJrZXIubGVuZ3RoO2krKykge1xuXHRcdFx0aWYgKG5ld01hcmtlci5pbmRleE9mKGFjdGl2ZU5vZGVNYXJrZXJbaV0pPDApIHtcblx0XHRcdFx0aWYgKGFjdGl2ZU5vZGVNYXJrZXJbaV0uZ2dNYXJrZXJOb3JtYWwpIHtcblx0XHRcdFx0XHRhY3RpdmVOb2RlTWFya2VyW2ldLmdnTWFya2VyTm9ybWFsLnN0eWxlLnZpc2liaWxpdHk9J2luaGVyaXQnO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChhY3RpdmVOb2RlTWFya2VyW2ldLmdnTWFya2VyQWN0aXZlKSB7XG5cdFx0XHRcdFx0YWN0aXZlTm9kZU1hcmtlcltpXS5nZ01hcmtlckFjdGl2ZS5zdHlsZS52aXNpYmlsaXR5PSdoaWRkZW4nO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChhY3RpdmVOb2RlTWFya2VyW2ldLmdnRGVhY3RpdmF0ZSkge1xuXHRcdFx0XHRcdGFjdGl2ZU5vZGVNYXJrZXJbaV0uZ2dEZWFjdGl2YXRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Zm9yKGk9MDtpPG5ld01hcmtlci5sZW5ndGg7aSsrKSB7XG5cdFx0XHRpZiAoYWN0aXZlTm9kZU1hcmtlci5pbmRleE9mKG5ld01hcmtlcltpXSk8MCkge1xuXHRcdFx0XHRpZiAobmV3TWFya2VyW2ldLmdnTWFya2VyTm9ybWFsKSB7XG5cdFx0XHRcdFx0bmV3TWFya2VyW2ldLmdnTWFya2VyTm9ybWFsLnN0eWxlLnZpc2liaWxpdHk9J2hpZGRlbic7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5ld01hcmtlcltpXS5nZ01hcmtlckFjdGl2ZSkge1xuXHRcdFx0XHRcdG5ld01hcmtlcltpXS5nZ01hcmtlckFjdGl2ZS5zdHlsZS52aXNpYmlsaXR5PSdpbmhlcml0Jztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobmV3TWFya2VyW2ldLmdnQWN0aXZhdGUpIHtcblx0XHRcdFx0XHRuZXdNYXJrZXJbaV0uZ2dBY3RpdmF0ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGFjdGl2ZU5vZGVNYXJrZXI9bmV3TWFya2VyO1xuXHR9XG5cdHRoaXMuc2tpblRpbWVyRXZlbnQ9ZnVuY3Rpb24oKSB7XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHsgbWUuc2tpblRpbWVyRXZlbnQoKTsgfSwgMTApO1xuXHRcdGlmIChtZS5lbGVtZW50TW91c2VPdmVyWydhcnJvd19yaWdodCddKSB7XG5cdFx0XHRtZS5wbGF5ZXIuY2hhbmdlUGFuKC0wLjI1LHRydWUpO1xuXHRcdH1cblx0XHRpZiAobWUuZWxlbWVudE1vdXNlT3ZlclsnYXJyb3dfbGVmdCddKSB7XG5cdFx0XHRtZS5wbGF5ZXIuY2hhbmdlUGFuKDAuMjUsdHJ1ZSk7XG5cdFx0fVxuXHR9O1xuXHR0aGlzLmFkZFNraW4oKTtcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9